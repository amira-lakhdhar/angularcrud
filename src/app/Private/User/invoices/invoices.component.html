<!-- ===============================================-->
<!--    Main Content-->
<!-- ===============================================-->

<main class="main" id="top">
  <div class="container-fluid" data-layout="container">

    <nav class="navbar navbar-light navbar-vertical navbar-expand-xl">
      <app-sidebar></app-sidebar>
    </nav>

    <div class="content">
      <app-navbar></app-navbar>
      <div class="row mb-3">
        <div class="col" style="margin-top: 10px;">
          <div class="card bg-100 shadow-none border">
            <div class="row gx-0 flex-between-center">
              <div class="col-sm-auto d-flex align-items-center"><img class="ms-n2"
                  src="../assets/img/illustrations/crm-bar-chart.png" alt="" width="90" />
                <div>
                  <h4 class="text-primary fw-bold mb-0">Invoices <span class="text-info fw-medium">MSP</span></h4>
                </div><img class="ms-n4 d-md-none d-lg-block" src="../assets/img/illustrations/crm-line-chart.png"
                  alt="" width="150" />
              </div>
              <div class="col-md-auto p-3">
                <form class="row align-items-center g-3">
                  <div class="col-auto">
                    <h6 class="text-700 mb-0">Showing Data For: </h6>
                  </div>
                  <div class="col-md-auto position-relative"><input
                      class="form-control form-control-sm datetimepicker ps-4" id="CRMDateRange" type="text"
                      data-options="{&quot;mode&quot;:&quot;range&quot;,&quot;dateFormat&quot;:&quot;M d&quot;,&quot;disableMobile&quot;:true , &quot;defaultDate&quot;: [&quot;Jun 24&quot;, &quot;Jul 01&quot;] }" /><span
                      class="fas fa-calendar-alt text-primary position-absolute top-50 translate-middle-y ms-2">
                    </span>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

      </div>
      <ul class="navbar-nav align-items-center d-none d-lg-block">
        <li class="nav-item">
          <div class="search-box" data-list='{"valueNames":["title"]}'>
            <form class="position-relative" data-bs-toggle="search" data-bs-display="static"><input
                class="form-control search-input fuzzy-search" type="search" placeholder="Search..."
                aria-label="Search" />
              <span class="fas fa-search search-box-icon"></span>
            </form>
            <div class="btn-close-falcon-container position-absolute end-0 top-50 translate-middle shadow-none"
              data-bs-dismiss="search">
              <div class="btn-close-falcon" aria-label="Close"></div>
            </div>
          </div>
        </li>
      </ul>
      <div class="card" style="margin-top: 16px;">
        <div class=" mb-3">
          <div class="card-header">
            <div class="row flex-between-end">
            </div>
          </div>
          
          <div class="card-body pt-0">
            <div class="tab-content">
              <div class="tab-pane preview-tab-pane active" role="tabpanel"
                aria-labelledby="tab-dom-603ac24c-ea41-4c86-96c0-b0f750fb6de0"
                id="dom-603ac24c-ea41-4c86-96c0-b0f750fb6de0">
                <div id="tableExample2"
                  data-list='{"valueNames":["name","email","age" , "payment" , "client"],"page":5,"pagination":true , "filter": true, "fallback":"pages-table-fallback"}'>
                  <div class="row">
                    <div class="col-4">
                      <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                        data-bs-target="#addArticleDialog">+ Add invoices</button>
                    </div>
                    <div class="col-sm-4"></div>
                    <div class="col-sm-4">

                      <div class="h-100 ">
                        <form>
                          <div class="input-group"><input class="form-control form-control-sm  search" type="search"
                              placeholder="Search for a ..." aria-label="search" />
                            <div class="input-group-text bg-transparent">
                              <span class="fa fa-search fs--1 text-600"></span>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                  <div id="contentToConvert" *ngIf="showDatapd" style="margin-top: 30px;">

                    <div class="row" style="padding: 60px; border: 0.2px solid gray; border-radius: 20px;">
                        <div class="col-6" style="font-weight: bold;">ID : </div>
                        <div class="col-6">{{invoiceObj?.idInvoice}}</div>
                        <div class="col-6" style="font-weight: bold;">Date : </div>
                        <div class="col-6">{{invoiceObj?.dateCreationInvoice | date: 'yyyy/mm/dd'}}</div>
                        <div class="col-6" style="font-weight: bold;">Total price : </div>
                        <div class="col-6">{{invoiceObj?.totalPrice}}</div>
                        <div class="col-6" style="font-weight: bold;">User : </div>
                        <div class="col-6">{{invoiceObj.user.username}}</div>
                        <div class="col-6" style="font-weight: bold;">Cin : </div>
                        <div class="col-6">{{invoiceObj.user.cin}}</div>
                    </div>
                  </div>
                  <div class="row" style="margin-top: 20px;" *ngIf="showDatapd">
                    <div class="col-4">
                      <button class="btn btn-success" (click)="generatePdf()">PDF</button>
                    </div>
                  </div>
                  <div class="table-responsive scrollbar" style="margin-top: 10px;">
                    <table class="table table-bordered table-striped fs--1 mb-0">
                      <thead class="bg-200 text-900">
                          <tr>
                              <th class="sort" data-sort="nomArt">ID</th>
                              <th class="sort" data-sort="description">Date </th>
                              <th class="sort" data-sort="price">Type </th>
                              <th class="sort" data-sort="price">Total price </th>
                              <th class="sort" data-sort="stock">User </th>
                              <th class="sort" data-sort="stock">Cin </th>
                              <th class="sort" data-sort="stock">Zone </th>
                          

                              <th class="sort align-middle white-space-nowrap text-end pe-4"
                                  data-sort="payment">Action</th> 


                          </tr>
                      </thead>
                      <tbody class="list" id="table-purchase-body" *ngFor=" let inv of allInvoices">
                          <tr class="btn-reveal-trigger">
                              <td class="name"><a class="text-primary fw-semi-bold" href="#!">
                                      {{inv.idInvoice}}</a></td>
                              <td class="email">{{inv.dateCreationInvoice | date: 'yyyy/mm/dd'}}</td>
                              <td class="age">{{inv.typeInvoice}}</td>
                              <td class="age">{{inv.totalPrice}}</td>
                              <td class="age">{{inv.user.username}}</td>
                              <td class="age">{{inv.user.cin}}</td>
                              <td class="age">{{inv.zone.nomZone}}</td>


                              <td>
                                 <button pButton pRipple icon="pi pi-file" (click)="showPagepdf(inv)" style="width: 10px; height: 30px;"  class="p-button-sm p-button-rounded p-button-danger"
                                   ></button>
                                 
                              </td>

                          </tr>

                      </tbody>
                  </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>



     

      <app-footer></app-footer>
    </div>
    <div class="modal fade" id="addArticleDialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div style="width: 600px;" class="modal-dialog modal-lg modal-dialog-centered" role="document">

        <div class="modal-content position-relative">
            <div class="card">
                <div class="bg-holder bg-card"
                    style="background-image:url(../assets/img/icons/spot-illustrations/corner-5.png);"></div>

                <div class="card-body position-relative">
                    <div class="row g-2 align-items-sm-center">
                        <div class="col-auto"><img src="../assets/img/icons/connect-circle.png" alt=""
                                height="55" /></div>
                        <div class="col">
                            <div class="row align-items-center">
                                <div class="col col-lg-8">
                                    <h5 class="fs-0 mb-3 mb-sm-0 text-primary">Add Invoice</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="position-absolute top-0 end-0 mt-2 me-2 z-index-1">
                <button class="btn-close btn btn-sm btn-circle d-flex flex-center transition-base"
                    data-bs-dismiss="modal" aria-label="Close" ></button>
            </div>
            <div class="modal-body p-0">
                <form style="padding: 20px;">
                    <div class="row">
                      <div class="col-12">
                      
                        <label for="selectArt"> Les article</label><br>
                        <p-multiSelect [options]="allArticles" id="selectArt" (onChange)="selectArticle($event)" 
                            defaultLabel="Veuillez choisir les articles"  optionValue="idArt"
                            optionLabel="nomArt"></p-multiSelect>
                      </div>
                       
                        <div class="col-12" style="margin-top: 10px;">
                            <div class="form-group">
                                <label for="type">Type invoices</label>
                                <select class="form-control" id="type" placeholder="Select type" name="typeInv"
                                    [(ngModel)]="invoice.typeInvoice">
                                    <option value="NORMAL">NORMAL</option>
                                    <option value="AVOIR">AVOIR</option>
                                    <option value="BACK">BACK</option>

                                </select>
                            </div>
                        </div>

                       
                    </div>
                </form>

            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="clos" type="button" data-bs-dismiss="modal">Cancel</button>
                <button class="btn btn-primary" data-bs-dismiss="modal" (click)="addInvoices()" >Add </button>
                <button class="btn btn-primary" data-bs-dismiss="modal" >Edit </button>

            </div>
        </div>
    </div>
</div>
  </div>

</main><!-- ===============================================-->
<!--    End of Main Content-->
<!-- ===============================================-->
